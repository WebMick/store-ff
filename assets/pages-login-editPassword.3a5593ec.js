import{u as e,r as l,c as a,d as s,e as o,w as u,i as d,h as t,x as r,t as n,n as p,j as i,f as c,G as v,H as w,q as m,A as y,I as g,v as k}from"./index-1326579e.js";import{_ as h}from"./uni-nav-bar.e0329405.js";import{_ as f,a as V,r as P}from"./uni-app.es.a60443e8.js";import{_}from"./uni-icons.e2da828d.js";import{_ as C}from"./w-loading.4fc13da4.js";import{e as $}from"./login.d846595a.js";const x=f({__name:"editPassword",setup(f){const{t:x}=e(),U=c(),b=l("");l(0);const j=a((()=>U.state.userinfo));a((()=>U.state.areaCode));const I=l("");V((e=>{I.value=e.type}));const B=l({email:"",mobile:"",oldPassword:"",password:"",rePassword:""}),A=e=>{B.value[e]=""},T=l(!1),q=l(!1),z=l(!1);l(!1);const E=l(!0),G=l(!1),H=()=>{2==I.value||B.value.oldPassword?B.value.password&&B.value.rePassword?B.value.password===B.value.rePassword?E.value&&(G.value=!0,$({oldPassword:B.value.oldPassword,newPassword:B.value.password,userId:j.value.userId,type:I.value}).then((e=>{if(200!==e.data.code)v({title:e.data.message,icon:"none",duration:2e3});else{v({title:x("login.t44"),icon:"success",duration:2e3});let e=setTimeout((()=>{clearTimeout(e),w({delta:1})}),2e3)}})).catch((e=>{b.value=x("message.t1")})).finally((()=>{G.value=!1}))):b.value=x("login.t34"):b.value=x("login.t14"):b.value=x("login.t43")};return(e,l)=>{const a=P(m("uni-nav-bar"),h),c=y,v=d,w=g,f=P(m("uni-icons"),_),V=k("van-button"),$=P(m("w-loading"),C);return s(),o(v,{class:"ano-page ano-login ano-reset"},{default:u((()=>[t(a,{class:"ano-statusBar","background-color":"transparent",statusBar:!0,border:!1,height:"0"}),t(v,{class:"login-title"},{default:u((()=>[0==I.value?(s(),o(c,{key:0,class:"t1"},{default:u((()=>[r(n(e.$t("login.t35")),1)])),_:1})):p("",!0),1==I.value?(s(),o(c,{key:1,class:"t1"},{default:u((()=>[r(n(e.$t("login.t36")),1)])),_:1})):p("",!0),2==I.value?(s(),o(c,{key:2,class:"t1"},{default:u((()=>[r(n(e.$t("login.t37")),1)])),_:1})):p("",!0)])),_:1}),i("div",{class:"login-warn"},n(e.$t("login.t38")),1),0==I.value?(s(),o(v,{key:0,class:"login-form"},{default:u((()=>[t(v,{class:"form-row form-row-password"},{default:u((()=>[t(v,{class:"input-wrap"},{default:u((()=>[T.value?(s(),o(w,{key:1,class:"uni-input",modelValue:B.value.oldPassword,"onUpdate:modelValue":l[1]||(l[1]=e=>B.value.oldPassword=e),maxlength:"42",placeholder:e.$t("login.t39")},null,8,["modelValue","placeholder"])):(s(),o(w,{key:0,password:"",class:"uni-input",maxlength:"42",modelValue:B.value.oldPassword,"onUpdate:modelValue":l[0]||(l[0]=e=>B.value.oldPassword=e),placeholder:e.$t("login.t39")},null,8,["modelValue","placeholder"])),B.value.oldPassword.length>0?(s(),o(f,{key:2,type:"close",onClick:l[2]||(l[2]=e=>A("oldPassword"))})):p("",!0),T.value?(s(),o(f,{key:3,type:"eye-slash",onClick:l[3]||(l[3]=e=>T.value=!T.value)})):(s(),o(f,{key:4,type:"eye",onClick:l[4]||(l[4]=e=>T.value=!T.value)}))])),_:1})])),_:1}),t(v,{class:"form-row form-row-password"},{default:u((()=>[t(v,{class:"input-wrap"},{default:u((()=>[q.value?(s(),o(w,{key:1,class:"uni-input",modelValue:B.value.password,"onUpdate:modelValue":l[6]||(l[6]=e=>B.value.password=e),maxlength:"42",placeholder:e.$t("login.t391")},null,8,["modelValue","placeholder"])):(s(),o(w,{key:0,password:"",class:"uni-input",maxlength:"42",modelValue:B.value.password,"onUpdate:modelValue":l[5]||(l[5]=e=>B.value.password=e),placeholder:e.$t("login.t391")},null,8,["modelValue","placeholder"])),B.value.password.length>0?(s(),o(f,{key:2,type:"close",onClick:l[7]||(l[7]=e=>A("password"))})):p("",!0),q.value?(s(),o(f,{key:3,type:"eye-slash",onClick:l[8]||(l[8]=e=>q.value=!q.value)})):(s(),o(f,{key:4,type:"eye",onClick:l[9]||(l[9]=e=>q.value=!q.value)}))])),_:1})])),_:1}),t(v,{class:"form-row form-row-password"},{default:u((()=>[t(v,{class:"input-wrap"},{default:u((()=>[z.value?(s(),o(w,{key:1,class:"uni-input",modelValue:B.value.rePassword,"onUpdate:modelValue":l[11]||(l[11]=e=>B.value.rePassword=e),maxlength:"42",placeholder:e.$t("login.t40")},null,8,["modelValue","placeholder"])):(s(),o(w,{key:0,password:"",class:"uni-input",maxlength:"42",modelValue:B.value.rePassword,"onUpdate:modelValue":l[10]||(l[10]=e=>B.value.rePassword=e),placeholder:e.$t("login.t40")},null,8,["modelValue","placeholder"])),B.value.rePassword.length>0?(s(),o(f,{key:2,type:"close",onClick:l[12]||(l[12]=e=>A("rePassword"))})):p("",!0),z.value?(s(),o(f,{key:3,type:"eye-slash",onClick:l[13]||(l[13]=e=>z.value=!z.value)})):(s(),o(f,{key:4,type:"eye",onClick:l[14]||(l[14]=e=>z.value=!z.value)}))])),_:1})])),_:1})])),_:1})):p("",!0),1==I.value?(s(),o(v,{key:1,class:"login-form"},{default:u((()=>[t(v,{class:"form-row form-row-password"},{default:u((()=>[t(v,{class:"input-wrap"},{default:u((()=>[T.value?(s(),o(w,{key:1,class:"uni-input",modelValue:B.value.oldPassword,"onUpdate:modelValue":l[16]||(l[16]=e=>B.value.oldPassword=e),type:"digit",maxlength:"6",placeholder:e.$t("login.t39")},null,8,["modelValue","placeholder"])):(s(),o(w,{key:0,password:"",type:"digit",class:"uni-input",maxlength:"6",modelValue:B.value.oldPassword,"onUpdate:modelValue":l[15]||(l[15]=e=>B.value.oldPassword=e),placeholder:e.$t("login.t39")},null,8,["modelValue","placeholder"])),B.value.oldPassword.length>0?(s(),o(f,{key:2,type:"close",onClick:l[17]||(l[17]=e=>A("oldPassword"))})):p("",!0),T.value?(s(),o(f,{key:3,type:"eye-slash",onClick:l[18]||(l[18]=e=>T.value=!T.value)})):(s(),o(f,{key:4,type:"eye",onClick:l[19]||(l[19]=e=>T.value=!T.value)}))])),_:1})])),_:1}),t(v,{class:"form-row form-row-password"},{default:u((()=>[t(v,{class:"input-wrap"},{default:u((()=>[q.value?(s(),o(w,{key:1,class:"uni-input",modelValue:B.value.password,"onUpdate:modelValue":l[21]||(l[21]=e=>B.value.password=e),type:"digit",maxlength:"6",placeholder:e.$t("login.t391")},null,8,["modelValue","placeholder"])):(s(),o(w,{key:0,password:"",type:"digit",class:"uni-input",maxlength:"6",modelValue:B.value.password,"onUpdate:modelValue":l[20]||(l[20]=e=>B.value.password=e),placeholder:e.$t("login.t391")},null,8,["modelValue","placeholder"])),B.value.password.length>0?(s(),o(f,{key:2,type:"close",onClick:l[22]||(l[22]=e=>A("password"))})):p("",!0),q.value?(s(),o(f,{key:3,type:"eye-slash",onClick:l[23]||(l[23]=e=>q.value=!q.value)})):(s(),o(f,{key:4,type:"eye",onClick:l[24]||(l[24]=e=>q.value=!q.value)}))])),_:1})])),_:1}),t(v,{class:"form-row form-row-password"},{default:u((()=>[t(v,{class:"input-wrap"},{default:u((()=>[z.value?(s(),o(w,{key:1,class:"uni-input",modelValue:B.value.rePassword,"onUpdate:modelValue":l[26]||(l[26]=e=>B.value.rePassword=e),type:"digit",maxlength:"6",placeholder:e.$t("login.t40")},null,8,["modelValue","placeholder"])):(s(),o(w,{key:0,password:"",type:"digit",class:"uni-input",maxlength:"6",modelValue:B.value.rePassword,"onUpdate:modelValue":l[25]||(l[25]=e=>B.value.rePassword=e),placeholder:e.$t("login.t40")},null,8,["modelValue","placeholder"])),B.value.rePassword.length>0?(s(),o(f,{key:2,type:"close",onClick:l[27]||(l[27]=e=>A("rePassword"))})):p("",!0),z.value?(s(),o(f,{key:3,type:"eye-slash",onClick:l[28]||(l[28]=e=>z.value=!z.value)})):(s(),o(f,{key:4,type:"eye",onClick:l[29]||(l[29]=e=>z.value=!z.value)}))])),_:1})])),_:1})])),_:1})):p("",!0),2==I.value?(s(),o(v,{key:2,class:"login-form"},{default:u((()=>[t(v,{class:"form-row form-row-password"},{default:u((()=>[t(v,{class:"input-wrap"},{default:u((()=>[q.value?(s(),o(w,{key:1,class:"uni-input",modelValue:B.value.password,"onUpdate:modelValue":l[31]||(l[31]=e=>B.value.password=e),type:"digit",maxlength:"6",placeholder:e.$t("login.t41")},null,8,["modelValue","placeholder"])):(s(),o(w,{key:0,password:"",type:"digit",class:"uni-input",maxlength:"6",modelValue:B.value.password,"onUpdate:modelValue":l[30]||(l[30]=e=>B.value.password=e),placeholder:e.$t("login.t41")},null,8,["modelValue","placeholder"])),B.value.password.length>0?(s(),o(f,{key:2,type:"close",onClick:l[32]||(l[32]=e=>A("password"))})):p("",!0),q.value?(s(),o(f,{key:3,type:"eye-slash",onClick:l[33]||(l[33]=e=>q.value=!q.value)})):(s(),o(f,{key:4,type:"eye",onClick:l[34]||(l[34]=e=>q.value=!q.value)}))])),_:1})])),_:1}),t(v,{class:"form-row form-row-password"},{default:u((()=>[t(v,{class:"input-wrap"},{default:u((()=>[z.value?(s(),o(w,{key:1,class:"uni-input",modelValue:B.value.rePassword,"onUpdate:modelValue":l[36]||(l[36]=e=>B.value.rePassword=e),type:"digit",maxlength:"6",placeholder:e.$t("login.t42")},null,8,["modelValue","placeholder"])):(s(),o(w,{key:0,password:"",type:"digit",class:"uni-input",maxlength:"6",modelValue:B.value.rePassword,"onUpdate:modelValue":l[35]||(l[35]=e=>B.value.rePassword=e),placeholder:e.$t("login.t42")},null,8,["modelValue","placeholder"])),B.value.rePassword.length>0?(s(),o(f,{key:2,type:"close",onClick:l[37]||(l[37]=e=>A("rePassword"))})):p("",!0),z.value?(s(),o(f,{key:3,type:"eye-slash",onClick:l[38]||(l[38]=e=>z.value=!z.value)})):(s(),o(f,{key:4,type:"eye",onClick:l[39]||(l[39]=e=>z.value=!z.value)}))])),_:1})])),_:1})])),_:1})):p("",!0),t(v,{class:"login-errorMessage"},{default:u((()=>[b.value?(s(),o(c,{key:0,class:"t1"},{default:u((()=>[r(n(b.value),1)])),_:1})):p("",!0)])),_:1}),0==I.value||1==I.value?(s(),o(v,{key:3,class:"login-handle"},{default:u((()=>[t(V,{class:"login-btn",color:"#1f1f1f",disabled:!B.value.oldPassword||!B.value.password||!B.value.rePassword,onClick:H},{default:u((()=>[r(n(e.$t("login.t21")),1)])),_:1},8,["disabled"])])),_:1})):p("",!0),2==I.value?(s(),o(v,{key:4,class:"login-handle"},{default:u((()=>[t(V,{class:"login-btn",color:"#1f1f1f",disabled:!B.value.password||!B.value.rePassword,onClick:H},{default:u((()=>[r(n(e.$t("login.t21")),1)])),_:1},8,["disabled"])])),_:1})):p("",!0),t($,{show:G.value},null,8,["show"])])),_:1})}}},[["__scopeId","data-v-4a459b99"]]);export{x as default};
