import{u as e,r as a,c as l,a7 as s,d as t,e as u,w as n,i as r,j as o,h as d,t as i,k as v,l as c,F as m,f,q as _,x as g}from"./index-1326579e.js";import{a as p,b,c as h,e as y}from"./dayjs.min.5f9aec22.js";import{_ as w,a as j,c as x,d as N,r as T}from"./uni-app.es.a60443e8.js";import{_ as $}from"./w-loading.4fc13da4.js";import{i as k}from"./user.2b7a6c52.js";import"./uni-icons.e2da828d.js";const I=w({__name:"subProxy",setup(w){const{t:I}=e();f();const S=a(!1),z={pageSize:20,pageNo:1},A=a(""),C=a(""),R=a("");j((e=>{A.value=e.userId,C.value=e.startTime,R.value=e.endTime,S.value=!0,q(z).finally((()=>{S.value=!1}))}));const P=a({records:[]});function q(e){return k({...e,userId:A.value,startTime:C.value,endTime:R.value}).then((e=>{var a;200===e.data.code&&(P.value=1===z.pageNo?e.data.result||{records:[]}:{...e.data.result||{},records:P.value.records.concat((null==(a=e.data.result)?void 0:a.records)||[])})})).catch((e=>{}))}const B=[{value:"more"},{value:"loading"},{value:"noMore"}];return a({contentdown:I("message.t2"),contentrefresh:I("message.t3"),contentnomore:I("message.t4")}),l((()=>{var e,a,l;return S.value?B[1].value:(null==(e=P.value)?void 0:e.total)>(null==(l=null==(a=P.value)?void 0:a.records)?void 0:l.length)?B[0].value:B[2].value})),x((()=>{q(z).finally((()=>{s()}))})),N((()=>{var e;P.value.total>(null==(e=P.value)?void 0:e.records.length)&&q({pageSize:z.pageSize,pageNo:+P.value.current+1})})),(e,a)=>{const l=T(_("uni-th"),p),s=T(_("uni-tr"),b),f=T(_("uni-td"),h),w=T(_("uni-table"),y),j=T(_("w-loading"),$),x=r;return t(),u(x,{class:"ano-page ano-myOrder"},{default:n((()=>{var a,r;return[o("div",{class:"assets-rebates-list"},[d(w,{class:"ano-table rebates-table",emptyText:S.value||(null==(r=null==(a=P.value)?void 0:a.records)?void 0:r.length)?"":e.$t("user.t65")},{default:n((()=>{var a;return[d(s,null,{default:n((()=>[d(l,{align:"center",style:{width:"25%"}},{default:n((()=>[o("div",{class:"str"},i(e.$t("user.t66")),1)])),_:1}),d(l,{align:"center",style:{width:"25%"}},{default:n((()=>[o("div",{class:"str"},i(e.$t("user.t67")),1)])),_:1}),d(l,{align:"center",style:{width:"25%"}},{default:n((()=>[o("div",{class:"str"},i(e.$t("user.t68")),1)])),_:1}),d(l,{align:"center",style:{width:"25%"}},{default:n((()=>[o("div",{class:"str"},i(e.$t("user.t69")),1)])),_:1})])),_:1}),(t(!0),v(m,null,c(null==(a=P.value)?void 0:a.records,(a=>(t(),u(s,{key:a.userId,onClick:l=>e.toSubProxy(a)},{default:n((()=>[d(f,null,{default:n((()=>[g(i(null==a?void 0:a.userName),1)])),_:2},1024),d(f,null,{default:n((()=>[o("div",{class:"ano-table__num"},i((null==a?void 0:a.selfRebatesAmount)||0),1)])),_:2},1024),d(f,null,{default:n((()=>[o("div",{class:"ano-table__num"},i((null==a?void 0:a.subRebatesAmount)||0),1)])),_:2},1024),d(f,null,{default:n((()=>[o("div",{class:"ano-table__num"},i((null==a?void 0:a.transNum)||0),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))]})),_:1},8,["emptyText"])]),d(j,{show:S.value},null,8,["show"])]})),_:1})}}},[["__scopeId","data-v-4c9b180f"]]);export{I as default};
