import{u as s,r as e,c as a,a5 as r,a6 as t,a7 as u,d as o,e as i,w as d,f as l,i as n,h as c,j as _,m as v,t as p,E as m,x as S,k as g,n as y,p as b,s as f,q as w,v as R,G as T}from"./index-1326579e.js";import{_ as C}from"./uni-nav-bar.e0329405.js";import{_ as k,o as $,c as h,b as U,r as N}from"./uni-app.es.a60443e8.js";import{_ as I}from"./w-loading.4fc13da4.js";import{a as j,b as x,g as G}from"./user.2b7a6c52.js";import{c as B}from"./utils.6d9bcde1.js";import"./uni-icons.e2da828d.js";const L=k({__name:"user",setup(k){s();const L=l(),z=e(!1),E=a((()=>L.state.userinfo)),O=a((()=>L.state.configInfo)),q=a((()=>L.state.orderUnread||{})),A=a((()=>(q.value.appealSellerUnReadNum||0)+(q.value.completedSellerUnReadNum||0)+(q.value.paidSellerUnReadNum||0))),J=a((()=>L.state.myGoodsCount||{}));function M(){return j({userId:L.state.userinfo.userId}).then((s=>{var e,a,u;if(200!==s.data.code)return;let o={appealSellerUnReadNum:(null==(e=s.data.result)?void 0:e.appealSellerUnReadNum)||0,completedSellerUnReadNum:(null==(a=s.data.result)?void 0:a.completedSellerUnReadNum)||0,paidSellerUnReadNum:(null==(u=s.data.result)?void 0:u.paidSellerUnReadNum)||0};L.commit("setOrderUnread",o),A.value>0?r({index:2}):t({index:2})})),x({ownerId:L.state.userinfo.userId,pageSize:10,pageNo:1,isShow:0}).then((s=>{var e,a,u,o;200===s.data.code&&((null==(a=null==(e=s.data)?void 0:e.result)?void 0:a.total)>0?r({index:3}):t({index:3}),L.commit("setMyGoodsCount",{notList:(null==(o=null==(u=s.data)?void 0:u.result)?void 0:o.total)||0}))})).catch((s=>{})),G({userId:L.state.userinfo.userId}).then((s=>{200===s.data.code&&L.commit("setUserinfo",s.data.result)}))}function D(s){return 0==s.id&&q.value.paidSellerUnReadNum>0||(2==s.id&&q.value.appealSellerUnReadNum>0||4==s.id&&q.value.completedSellerUnReadNum>0)}z.value=!0,M().finally((()=>{z.value=!1})),$((()=>{z.value||M()}));const F=s=>{b({url:s})},H=s=>{L.commit("setOrderTabs",{orderType:K(s,"orderType"),subTab:K(s,"subTab")}),f({url:s})};function K(s,e){var a,r=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),t=null==(a=s.split("?")[1])?void 0:a.match(r);return null!=t?unescape(t[2]):null}h((()=>{M().finally((()=>{u()}))}));let P=0;function Q(){P++,P>=5&&(P=0,b({url:"/pages/test/test"}))}return U((()=>{if(L.getters.getIsShowGuidance){let s=L.getters.getGuidanceCurrentStep-1;L.commit("setGuidanceCurrentStep",s<=1?1:s)}})),(s,e)=>{const a=N(w("uni-nav-bar"),C),r=R("van-image"),t=N(w("w-loading"),I),u=n;return o(),i(u,{class:"ano-page ano-user"},{default:d((()=>[c(a,{class:"ano-statusBar","background-color":"transparent",statusBar:!0,border:!1,height:"0","status-bar":""}),_("div",{class:"user-info"},[c(r,{class:"user-info__avatars",src:v(O).imageLocalUrl+v(E).avatar,fit:"scale-down"},null,8,["src"]),_("div",{class:"user-info__cnt"},[_("div",{class:"user-info__t1",onClick:Q},p(v(E).userName||s.$t("user.user")),1),_("div",{class:"user-info__tags"},[_("div",{class:"promotionCode",onClick:e[0]||(e[0]=s=>{return e=v(E).promotionCode,void B(e,(()=>{T({title:"邀请码已复制至剪切板！",icon:"none",duration:2e3})}));var e})},[_("span",null,"邀请码:"),_("span",{class:"code"},p(v(E).promotionCode),1),_("div",{class:"icon"})])])]),_("div",{class:"user-info__edit",onClick:e[1]||(e[1]=s=>F("/pages/user/userinfo/userinfo"))}),_("div",{class:"user-info__setting",onClick:e[2]||(e[2]=s=>F("/pages/user/setting/setting"))})]),_("div",{class:"user-payStatus"},[_("div",{class:"user-navRow",onClick:e[3]||(e[3]=s=>H("/pages/user/order/order?orderType=0&subTab=0"))},[_("div",{class:"user-navRow__title"},p(s.$t("user.t8")),1),_("div",{class:"user-navRow__arrow"})]),_("div",{class:"user-payStatus__list"},[_("div",{class:"user-payStatus__item",onClick:e[4]||(e[4]=s=>H("/pages/user/order/order?orderType=0&subTab=0"))},[_("div",{class:"user-payStatus__icon icon-order5"}),_("div",{class:"user-payStatus__t1"},p(s.$t("user.t9")),1)]),_("div",{class:"user-payStatus__item",onClick:e[5]||(e[5]=s=>H("/pages/user/order/order?orderType=0&subTab=1"))},[_("div",{class:"user-payStatus__icon icon-order6"}),_("div",{class:"user-payStatus__t1"},p(s.$t("user.t10")),1)]),_("div",{class:"user-payStatus__item",onClick:e[6]||(e[6]=s=>H("/pages/user/order/order?orderType=0&subTab=2"))},[_("div",{class:"user-payStatus__icon icon-order7"}),_("div",{class:"user-payStatus__t1"},p(s.$t("user.t11")),1)]),_("div",{class:"user-payStatus__item",onClick:e[7]||(e[7]=s=>H("/pages/user/order/order?orderType=0&subTab=3"))},[_("div",{class:"user-payStatus__icon icon-order9"}),_("div",{class:"user-payStatus__t1"},p(s.$t("user.t1201")),1)]),_("div",{class:"user-payStatus__item",onClick:e[8]||(e[8]=s=>H("/pages/user/order/order?orderType=0&subTab=4"))},[_("div",{class:"user-payStatus__icon icon-order8"}),_("div",{class:"user-payStatus__t1"},p(s.$t("user.t12")),1)])])]),_("div",{class:"user-saleStatus"},[_("div",{class:"user-navRow",onClick:e[9]||(e[9]=s=>H("/pages/user/order/order?orderType=1&subTab=0"))},[_("div",{class:"user-navRow__title"},p(s.$t("user.t13")),1),_("div",{class:"user-navRow__arrow"})]),_("div",{class:"user-saleStatus__list"},[_("div",{class:"user-saleStatus__item",onClick:e[10]||(e[10]=s=>H("/pages/user/order/order?orderType=1&subTab=0"))},[_("div",{class:"user-payStatus__icon icon-order5"}),_("div",{class:"user-saleStatus__t1"},p(s.$t("user.t9")),1)]),_("div",{class:m(["user-saleStatus__item",{"user-saleStatus__item--dot":D({id:0})}]),onClick:e[11]||(e[11]=s=>H("/pages/user/order/order?orderType=1&subTab=1"))},[_("div",{class:"user-payStatus__icon icon-order6"}),_("div",{class:"user-saleStatus__t1"},p(s.$t("user.t10")),1)],2),_("div",{class:m(["user-saleStatus__item",{"user-saleStatus__item--dot":D({id:2})}]),onClick:e[12]||(e[12]=s=>H("/pages/user/order/order?orderType=1&subTab=2"))},[_("div",{class:"user-payStatus__icon icon-order7"}),_("div",{class:"user-saleStatus__t1"},p(s.$t("user.t11")),1)],2),_("div",{class:"user-saleStatus__item",onClick:e[13]||(e[13]=s=>H("/pages/user/order/order?orderType=1&subTab=3"))},[_("div",{class:"user-payStatus__icon icon-order9"}),_("div",{class:"user-saleStatus__t1"},p(s.$t("user.t1201")),1)]),_("div",{class:m(["user-saleStatus__item",{"user-saleStatus__item--dot":D({id:4})}]),onClick:e[14]||(e[14]=s=>H("/pages/user/order/order?orderType=1&subTab=4"))},[_("div",{class:"user-payStatus__icon icon-order8"}),_("div",{class:"user-saleStatus__t1"},p(s.$t("user.t12")),1)],2)])]),_("div",{class:"user-goods"},[_("div",{class:"nav-goods__item",onClick:e[15]||(e[15]=s=>F("/pages/user/shelves/shelves?goodsType=1"))},[_("div",{class:"nav-goods__t1"},p(s.$t("user.t14")),1),_("div",{class:"nav-goods__t2"},p(s.$t("user.t16"))+">>",1)]),_("div",{class:"nav-goods__item",onClick:e[16]||(e[16]=s=>F("/pages/user/shelves/shelves?goodsType=2"))},[_("div",{class:"nav-goods__t1"},[S(p(s.$t("user.t15")),1),v(J).notList>0?(o(),g("span",{key:0,class:"nav-goods__dot"})):y("",!0)]),_("div",{class:"nav-goods__t2"},p(s.$t("user.t16"))+">>",1)])]),_("div",{class:"user-navs"},[_("div",{class:"user-navRow",onClick:e[17]||(e[17]=s=>F("/pages/user/security/security"))},[_("div",{class:"user-navRow__icon icon-system"}),_("div",{class:"user-navRow__title"},p(s.$t("user.t17")),1),_("div",{class:"user-navRow__arrow"})]),_("div",{class:"user-navRow",onClick:e[18]||(e[18]=s=>F("/pages/user/payment/payment"))},[_("div",{class:"user-navRow__icon icon-pay"}),_("div",{class:"user-navRow__title"},p(s.$t("user.t18")),1),_("div",{class:"user-navRow__arrow"})]),_("div",{class:"user-navRow",onClick:e[19]||(e[19]=s=>F("/pages/user/addresses/addresses"))},[_("div",{class:"user-navRow__icon icon-address"}),_("div",{class:"user-navRow__title"},p(s.$t("user.t19")),1),_("div",{class:"user-navRow__arrow"})])]),c(t,{show:z.value},null,8,["show"])])),_:1})}}},[["__scopeId","data-v-6db94b6b"]]);export{L as default};
