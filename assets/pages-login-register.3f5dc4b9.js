import{u as e,r as l,c as a,D as o,d as s,e as t,w as n,f as u,i,h as r,j as d,x as v,t as c,n as p,m,E as g,p as f,G as y,z as h,q as w,A as _,I as k,C,v as b,B as V}from"./index-1326579e.js";import{_ as j}from"./uni-nav-bar.e0329405.js";import{_ as x,a as $,r as P}from"./uni-app.es.a60443e8.js";import{_ as U}from"./uni-icons.e2da828d.js";import{_ as F}from"./w-loading.4fc13da4.js";import{_ as I}from"./icon-down.7ae91194.js";import{u as T}from"./useForm.fc8de6ee.js";import{r as B}from"./login.d846595a.js";const z=x({__name:"register",setup(x){var z,A,E;const{t:N}=e(),D=()=>{history.go(-1)},M=u(),S=T(),q=l(""),G=l(0),H=a((()=>"0086")),J=l({email:"",mobile:"",password:"",jyPassword:"",promotionCode:"",registerFrom:null==(z=M.state.channelInfo)?void 0:z.registerFrom,channel:null==(A=M.state.channelInfo)?void 0:A.channel,subChannel:null==(E=M.state.channelInfo)?void 0:E.subChannel,deviceNo:"",deviceType:"",operatingSystem:"",operatingVersion:"",systemType:""});$((e=>{J.value.promotionCode=e.promotionCode,J.value.registerFrom=e.registerFrom||J.value.registerFrom,J.value.channel=e.channel||J.value.channel,J.value.subChannel=e.subChannel||J.value.subChannel}));const K=()=>{f({url:"/pages/states/states"})},L=e=>{J.value[e]=""},O=l(!1),Q=l(!1);l(!1);const R=l(!0),W=()=>{R.value=!R.value};let X={};o().then((e=>{X=e}));const Y=l(!1),Z=()=>{if(0===G.value){if(!S.verifyPhone(J.value.mobile))return void(q.value=N("login.t13"))}else{if(!J.value.email)return void(q.value=N("login.t11"));if(!S.verifyEmail(J.value.email))return void(q.value=N("login.t12"))}J.value.password&&J.value.jyPassword?J.value.password===J.value.jyPassword?/^.{6,12}$/.test(J.value.password)?R.value&&(J.value.promotionCode?(Y.value=!0,J.value.deviceNo=X.deviceId,J.value.deviceType=X.deviceType,J.value.operatingSystem=X.osName,J.value.operatingVersion=X.osVersion,J.value.systemType=X.deviceModel,B({...J.value,areaCode:H.value,type:G.value,jyPassword:""}).then((e=>{var l;if(200===e.data.code)return M.commit("setUserinfo",e.data.result),M.commit("setAccessToken",null==(l=e.data.result)?void 0:l.token),y({title:N("login.t25"),icon:"success",duration:2e3}),void h({url:"/pages/index/index"});q.value=e.data.message})).catch((e=>{q.value=N("message.t1")})).finally((()=>{Y.value=!1}))):q.value="请输入邀请码"):q.value=N("login.t45"):q.value=N("login.t34"):q.value=N("login.t14")};return(e,l)=>{const a=P(w("uni-nav-bar"),j),o=P(w("uni-icons"),U),u=_,f=i,y=k,h=C,x=b("van-button"),$=V,T=P(w("w-loading"),F);return s(),t(f,{class:"ano-page ano-login"},{default:n((()=>[r(a,{class:"ano-statusBar","background-color":"transparent",statusBar:!0,border:!1,height:"0"}),d("div",{class:"login-header"},[r(o,{type:"left",onClick:D})]),r(f,{class:"login-title"},{default:n((()=>[r(u,{class:"t1"},{default:n((()=>[v(c(e.$t("login.t27")),1)])),_:1})])),_:1}),r(f,{class:"login-form"},{default:n((()=>[0===G.value?(s(),t(f,{key:0,class:"form-row form-row-phone"},{default:n((()=>[r(f,{class:"input-wrap"},{default:n((()=>[r(f,{class:"phone-num"},{default:n((()=>[r(y,{style:{"padding-top":"6rpx"},class:"uni-input",type:"number",maxlength:"20",modelValue:J.value.mobile,"onUpdate:modelValue":l[0]||(l[0]=e=>J.value.mobile=e),placeholder:e.$t("login.t4")},null,8,["modelValue","placeholder"]),r(y,{type:"text",style:{width:"0",height:"0",opacity:"0"}}),J.value.mobile.length>0?(s(),t(o,{key:0,type:"close",onClick:l[1]||(l[1]=e=>L("mobile"))})):p("",!0)])),_:1})])),_:1})])),_:1})):p("",!0),1===G.value?(s(),t(f,{key:1,class:"form-row form-row-phone"},{default:n((()=>[r(f,{class:"input-wrap"},{default:n((()=>[r(f,{class:"phone-code",onClick:K},{default:n((()=>[r(u,{class:"num"},{default:n((()=>[v(c(m(H)?"+"+m(H):"--"),1)])),_:1}),r(h,{class:"icon-down",src:I,"lazy-load":""})])),_:1}),r(f,{class:"phone-num"},{default:n((()=>[r(y,{class:"uni-input",modelValue:J.value.email,"onUpdate:modelValue":l[2]||(l[2]=e=>J.value.email=e),maxlength:"30",placeholder:e.$t("login.t5")},null,8,["modelValue","placeholder"]),J.value.email.length>0?(s(),t(o,{key:0,type:"close",onClick:l[3]||(l[3]=e=>L("email"))})):p("",!0)])),_:1})])),_:1})])),_:1})):p("",!0),r(f,{class:"form-row form-row-password"},{default:n((()=>[r(f,{class:"input-wrap"},{default:n((()=>[O.value?(s(),t(y,{key:1,class:"uni-input",modelValue:J.value.password,"onUpdate:modelValue":l[5]||(l[5]=e=>J.value.password=e),maxlength:"12",placeholder:e.$t("login.t6")},null,8,["modelValue","placeholder"])):(s(),t(y,{key:0,password:"",class:"uni-input",maxlength:"12",modelValue:J.value.password,"onUpdate:modelValue":l[4]||(l[4]=e=>J.value.password=e),placeholder:e.$t("login.t6")},null,8,["modelValue","placeholder"])),J.value.password.length>0?(s(),t(o,{key:2,type:"close",onClick:l[6]||(l[6]=e=>L("password"))})):p("",!0),O.value?(s(),t(o,{key:3,type:"eye-slash",onClick:l[7]||(l[7]=e=>O.value=!O.value)})):(s(),t(o,{key:4,type:"eye",onClick:l[8]||(l[8]=e=>O.value=!O.value)}))])),_:1})])),_:1}),r(f,{class:"form-row form-row-password"},{default:n((()=>[r(f,{class:"input-wrap"},{default:n((()=>[Q.value?(s(),t(y,{key:1,class:"uni-input",modelValue:J.value.jyPassword,"onUpdate:modelValue":l[10]||(l[10]=e=>J.value.jyPassword=e),maxlength:"12",placeholder:e.$t("login.t61")},null,8,["modelValue","placeholder"])):(s(),t(y,{key:0,password:"",class:"uni-input",maxlength:"12",modelValue:J.value.jyPassword,"onUpdate:modelValue":l[9]||(l[9]=e=>J.value.jyPassword=e),placeholder:e.$t("login.t61")},null,8,["modelValue","placeholder"])),J.value.jyPassword.length>0?(s(),t(o,{key:2,type:"close",onClick:l[11]||(l[11]=e=>L("jyPassword"))})):p("",!0),Q.value?(s(),t(o,{key:3,type:"eye-slash",onClick:l[12]||(l[12]=e=>Q.value=!Q.value)})):(s(),t(o,{key:4,type:"eye",onClick:l[13]||(l[13]=e=>Q.value=!Q.value)}))])),_:1})])),_:1}),r(f,{class:"form-row form-row-recommend"},{default:n((()=>[r(f,{class:"input-wrap"},{default:n((()=>{var e;return[r(y,{class:"uni-input",modelValue:J.value.promotionCode,"onUpdate:modelValue":l[14]||(l[14]=e=>J.value.promotionCode=e),maxlength:"25",placeholder:"请输入邀请码"},null,8,["modelValue"]),(null==(e=J.value.promotionCode)?void 0:e.length)>0?(s(),t(o,{key:0,type:"close",onClick:l[15]||(l[15]=e=>L("promotionCode"))})):p("",!0)]})),_:1})])),_:1})])),_:1}),r(f,{class:"login-errorMessage"},{default:n((()=>[q.value?(s(),t(u,{key:0,class:"t1"},{default:n((()=>[v(c(q.value),1)])),_:1})):p("",!0)])),_:1}),0===G.value?(s(),t(f,{key:0,class:"login-handle"},{default:n((()=>[r(x,{class:"login-btn",disabled:!(R.value&&J.value.promotionCode&&J.value.mobile&&J.value.password&&J.value.jyPassword),onClick:Z},{default:n((()=>[v(c(e.$t("login.t27")),1)])),_:1},8,["disabled"])])),_:1})):p("",!0),1===G.value?(s(),t(f,{key:1,class:"login-handle"},{default:n((()=>[r(x,{class:"login-btn",disabled:!(R.value&&m(H)&&J.value.email&&J.value.password&&J.value.jyPassword),onClick:Z},{default:n((()=>[v(c(e.$t("login.t27")),1)])),_:1},8,["disabled"])])),_:1})):p("",!0),r(f,{class:"login-agreement"},{default:n((()=>[d("div",{class:g(["icon-radio2",{"icon-radio":R.value}]),onClick:W},null,2),r(u,{class:"t1"},{default:n((()=>[v(c(e.$t("login.t30")),1)])),_:1}),r($,{url:"/pages/login/login",class:"link","hover-class":"navigator-hover"},{default:n((()=>[r(u,{type:"default"},{default:n((()=>[v(" "+c(e.$t("login.t31"))+" ",1)])),_:1})])),_:1}),r(u,{class:"t1"},{default:n((()=>[v(c(e.$t("login.t32")),1)])),_:1}),r($,{url:"/pages/login/login",class:"link","hover-class":"navigator-hover"},{default:n((()=>[r(u,{type:"default"},{default:n((()=>[v(" "+c(e.$t("login.t33")),1)])),_:1})])),_:1})])),_:1}),r(T,{show:Y.value},null,8,["show"])])),_:1})}}},[["__scopeId","data-v-1a3df15d"]]);export{z as default};
