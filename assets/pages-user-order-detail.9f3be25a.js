import{u as r,r as e,c as a,G as s,d as t,e as d,w as o,i,j as l,t as n,m as u,k as c,n as _,x as v,h as m,f as y,p as f,a2 as O,v as b,q as p}from"./index-1326579e.js";import{_ as w}from"./w-loading.4fc13da4.js";import{_ as $,a as g,r as h}from"./uni-app.es.a60443e8.js";import{e as N,d as I,r as S}from"./user.2b7a6c52.js";import{c as j,t as k}from"./utils.6d9bcde1.js";import{u as x}from"./order.a11815e6.js";const F=$({__name:"detail",setup($){const{t:F}=r(),C=y(),T=x(F),P=e(!1),q=a((()=>C.state.userinfo)),A=e(""),G=e(""),J=e({});function Q(r){return I(r).then((r=>{200===r.data.code?(J.value=r.data.result||{},N({type:G.value,ids:[J.value.id]})):s({title:r.data.message,icon:"none",duration:2e3})})).catch((r=>{console.error(r)}))}g((r=>{A.value=r.orderId,G.value=r.orderType,P.value=!0,Q({orderNumber:A.value}).then((r=>{N({type:G.value,ids:[J.value.id]})})).finally((()=>{P.value=!1}))})),e(!1);return(r,e)=>{const a=b("van-button"),y=h(p("w-loading"),w),$=i;return t(),d($,{class:"ano-page ano-myOrder"},{default:o((()=>[l("div",{class:"myOrder-status flex-align-center"},[l("div",{class:"myOrder-status__cnt"},[l("div",{class:"myOrder-status__t1"},n(u(T).getOrderStatus(J.value.orderStatus).statusText),1),0===J.value.orderStatus?(t(),c("div",{key:0,class:"myOrder-status__t2"},n(r.$t("user.t153")),1)):_("",!0)]),l("div",{class:"myOrder-status__icon"})]),l("div",{class:"myOrder-section"},[l("div",{class:"myOrder-section__bd"}),l("div",{class:"myOrder-row myOrder-info"},[l("div",{class:"myOrder-info__row myOrder-info__hd"},[l("div",{class:"myOrder-info__hd-label"},n(0==G.value?r.$t("user.t154"):r.$t("user.t155"))+" "+n(J.value.coinId),1),l("div",{class:"myOrder-info__cnt"},n(u(T).getOrderStatus(J.value.status).statusText),1)]),l("div",{class:"myOrder-info__row"},[l("div",{class:"myOrder-info__label"},n(r.$t("user.t156")),1),l("div",{class:"myOrder-info__cnt myOrder-info__t1"},n(r.$t("currencySymbol"))+n(u(k)(J.value.totalPrice,2)),1)]),l("div",{class:"myOrder-info__row"},[l("div",{class:"myOrder-info__label"},n(r.$t("user.t157")),1),l("div",{class:"myOrder-info__cnt myOrder-info__t2"},n(r.$t("currencySymbol"))+n(u(k)(J.value.totalPrice/(J.value.totalNum||1),2)),1)]),l("div",{class:"myOrder-info__row"},[l("div",{class:"myOrder-info__label"},n(r.$t("user.t158")),1),l("div",{class:"myOrder-info__cnt myOrder-info__t2"},n(u(k)(J.value.number||1,2))+" "+n(J.value.coinId),1)]),l("div",{class:"myOrder-info__line"}),l("div",{class:"myOrder-info__row myOrder-info__row2"},[l("div",{class:"myOrder-info__label"},n(r.$t("user.t159")),1),l("div",{class:"myOrder-info__cnt myOrder-info__t2"},n(J.value.orderNumber),1),l("div",{class:"myOrder-info__icon-card",onClick:e[0]||(e[0]=r=>{return e=J.value.orderNumber,void j(e,(()=>{s({title:F("user.t29"),icon:"none",duration:2e3})}));var e})})]),l("div",{class:"myOrder-info__row myOrder-info__row2"},[l("div",{class:"myOrder-info__label"},n(r.$t("user.t160")),1),l("div",{class:"myOrder-info__cnt myOrder-info__t2"},n(J.value.createTime),1)]),l("div",{class:"myOrder-info__row myOrder-info__row3"},[0==G.value&1==J.value.orderStatus?(t(),d(a,{key:0,class:"myOrder-info__btn",color:"#1F1F1F",onClick:e[1]||(e[1]=r=>{return e=J.value,void f({url:`/pages/trade/pay?id=${e.goodsId}&orderId=${e.orderNumber}`});var e})},{default:o((()=>[v(n(r.$t("user.t78")),1)])),_:1})):_("",!0),1==G.value&2==J.value.orderStatus?(t(),d(a,{key:1,class:"myOrder-info__btn",color:"#1F1F1F",onClick:e[2]||(e[2]=r=>{return e=J.value,void O({title:F("user.t80"),content:F("user.t81"),success:function(r){r.confirm&&(P.value=!0,S({orderNumber:e.orderNumber,sellerId:q.value.userId}).then((r=>{200===r.data.code?(s({title:F("user.t82"),icon:"success",duration:2e3}),P.value=!0,Q({orderNumber:A.value}).finally((()=>{P.value=!1}))):s({title:r.data.message,icon:"none",duration:2e3})})).catch((r=>{s({title:F("message.t1"),icon:"none",duration:2e3})})).finally((()=>{P.value=!1})))}});var e})},{default:o((()=>[v(n(r.$t("user.t79")),1)])),_:1})):_("",!0)])])]),m(y,{show:P.value},null,8,["show"])])),_:1})}}},[["__scopeId","data-v-1668002b"]]);export{F as default};
