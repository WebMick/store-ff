import{u as e,r as a,c as l,d as s,e as o,w as t,i as u,h as n,j as i,x as r,t as d,n as p,f as c,z as g,p as m,q as f,A as v,I as h,v as A,B as w,C as b}from"./index-1326579e.js";import{_ as y}from"./uni-nav-bar.e0329405.js";import{_ as B,r as _}from"./uni-app.es.a60443e8.js";import{_ as C}from"./uni-icons.e2da828d.js";import{_ as k}from"./w-loading.4fc13da4.js";import{u as j}from"./useForm.fc8de6ee.js";import{l as x}from"./login.d846595a.js";const R=B({__name:"login",setup(B){const{t:R}=e(),U=c(),E=j(),K=a(0);l((()=>U.state.areaCode)),l((()=>U.state.configInfo));const M=a({mobile:"",email:"",password:""}),V=()=>{history.go(-1)},W=e=>{M.value[e]=""},z=a(!1),T=a(""),Y=a(!1),Z=()=>{0!==K.value||E.verifyPhone(M.value.mobile)?M.value.password?(T.value="",Y.value=!0,x({...M.value,areaCode:"0086",type:K.value}).then((e=>{var a;200===e.data.code?(U.commit("setUserinfo",e.data.result),U.commit("setAccessToken",null==(a=e.data.result)?void 0:a.token),g({url:"/pages/index/index"}),T.value=e.data.message):T.value=e.data.message})).catch((e=>{console.log({err:e}),T.value=R("message.t1")})).finally((()=>{Y.value=!1}))):T.value=R("login.t14"):T.value=R("login.t13")};let H=0;function I(){H++,H>=5&&(H=0,m({url:"/pages/test/test"}))}return(e,a)=>{const l=_(f("uni-nav-bar"),y),c=_(f("uni-icons"),C),g=v,m=u,B=h,j=A("van-button"),x=w,R=b,U=_(f("w-loading"),k);return s(),o(m,{class:"ano-page ano-login"},{default:t((()=>[n(l,{class:"ano-statusBar","background-color":"transparent",statusBar:!0,border:!1,height:"0"}),i("div",{class:"login-header"},[n(c,{type:"left",onClick:V})]),n(m,{class:"login-title",onClick:I},{default:t((()=>[n(g,{class:"t1"},{default:t((()=>[r(d(e.$t("login.t1")),1)])),_:1})])),_:1}),n(m,{class:"login-form"},{default:t((()=>[n(m,{class:"form-row form-row-phone"},{default:t((()=>[n(m,{class:"input-wrap"},{default:t((()=>[n(m,{class:"phone-num"},{default:t((()=>[n(B,{style:{"padding-top":"6rpx"},class:"uni-input",type:"number",maxlength:"20",modelValue:M.value.mobile,"onUpdate:modelValue":a[0]||(a[0]=e=>M.value.mobile=e),placeholder:e.$t("login.t4"),autoComplete:"off"},null,8,["modelValue","placeholder"]),n(B,{type:"text",style:{width:"0",height:"0",opacity:"0"}}),M.value.mobile.length>0?(s(),o(c,{key:0,type:"close",onClick:a[1]||(a[1]=e=>W("mobile"))})):p("",!0)])),_:1})])),_:1})])),_:1}),n(m,{class:"form-row form-row-password"},{default:t((()=>[n(m,{class:"input-wrap"},{default:t((()=>[z.value?(s(),o(B,{key:1,class:"uni-input",modelValue:M.value.password,"onUpdate:modelValue":a[3]||(a[3]=e=>M.value.password=e),maxlength:"42",placeholder:e.$t("login.t7"),autoComplete:"new-password"},null,8,["modelValue","placeholder"])):(s(),o(B,{key:0,password:"",class:"uni-input",maxlength:"42",modelValue:M.value.password,"onUpdate:modelValue":a[2]||(a[2]=e=>M.value.password=e),placeholder:e.$t("login.t6"),autoComplete:"new-password"},null,8,["modelValue","placeholder"])),M.value.password.length>0?(s(),o(c,{key:2,type:"close",onClick:a[4]||(a[4]=e=>W("password"))})):p("",!0),z.value?(s(),o(c,{key:3,type:"eye-slash",onClick:a[5]||(a[5]=e=>z.value=!z.value)})):(s(),o(c,{key:4,type:"eye",onClick:a[6]||(a[6]=e=>z.value=!z.value)}))])),_:1})])),_:1})])),_:1}),n(m,{class:"login-errorMessage"},{default:t((()=>[T.value?(s(),o(g,{key:0,class:"t1"},{default:t((()=>[r(d(T.value),1)])),_:1})):p("",!0)])),_:1}),n(m,{class:"login-handle"},{default:t((()=>[n(j,{class:"login-btn",disabled:!M.value.mobile||!M.value.password,onClick:Z},{default:t((()=>[r(d(e.$t("login.t9")),1)])),_:1},8,["disabled"])])),_:1}),n(m,{class:"login-forget"},{default:t((()=>[n(x,{url:"/pages/login/forget",class:"forget-reset","hover-class":"navigator-hover"},{default:t((()=>[n(g,{type:"default"},{default:t((()=>[r(d(e.$t("login.t7")),1)])),_:1})])),_:1}),n(x,{url:"/pages/login/register",class:"sing-up","hover-class":"navigator-hover"},{default:t((()=>[n(R,{class:"icon-arrow-right",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAATCAYAAACDW21BAAAAAXNSR0IArs4c6QAAAbBJREFUSEu91TtrlFEQxvHfeCm08ooBLQRRBMXLdxBbq+Bn8QNoo0RFxBuIhWi0EMXCLqYJRLAMKVQEBY2iguKFeMuRgbPwRjfZ3azZaV7YMzv/c3nmmbDEKKXsxBWsxwjuRcTHTuWiU8JC66WUA7iBXXiOq7gWEW8Wq9kPcD+uYy8KPuA2LmE6In61A/cD3FNPuK9R+BsmcQZjEfH1b2iUUrZiMxKeO+0UmTOH3TiOfMtm/MZTXMRoRLxtLibwMg5WYBbqJhK6Bjuwts0fcj1Bo8j6TyIiNyKBM9hSgd3Aesn5gvF6xRMRMZvAd9jUS5Uec39iCudwN4Ep4zzhckY+1Yvs10EB8zCzuDUo4A88wolBvOFnPKjCeZzA1xhaBpVma7zHTZzHs4iYa/bhCmSvtAxgsW+KYCW2Y0ObzbZEkj04z18TuK22RQIzsRtgSn0djuEwVjUknh46jZO4HxGf5jnNUnuhlLKxvstRrK51UokTOIWHEfH9Hy/tA5hmcRbDFZgnuVN/m2pZ2f8EpuGnQR+p4shRlW7yMiIWHAL9jKe80tM4VIfvhYh41enG/gBWup9vmTnfugAAAABJRU5ErkJggg=="}),n(g,{type:"default"},{default:t((()=>[r(d(e.$t("login.t8")),1)])),_:1})])),_:1})])),_:1}),n(U,{show:Y.value},null,8,["show"])])),_:1})}}},[["__scopeId","data-v-e583fbbf"]]);export{R as default};
