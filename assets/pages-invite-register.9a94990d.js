import{u as e,r as l,c as a,D as o,d as s,e as n,w as t,f as u,i,h as d,j as r,x as c,t as v,m as p,n as m,E as f,p as g,q as y,A as h,I as w,C as _,v as k,B as C}from"./index-1326579e.js";import{_ as b}from"./uni-nav-bar.e0329405.js";import{_ as V,a as j,r as $}from"./uni-app.es.a60443e8.js";import{_ as P}from"./uni-icons.e2da828d.js";import{_ as x}from"./w-loading.4fc13da4.js";import{_ as F}from"./icon-down.7ae91194.js";import{u as I}from"./useForm.fc8de6ee.js";import{r as T}from"./login.d846595a.js";const U=V({__name:"register",setup(V){var U,B,z;const{t:E}=e(),N=()=>{history.go(-1)},A=u(),D=I(),M=l(""),S=l(0),q=a((()=>A.state.areaCode)),L=l({email:"",mobile:"",password:"",jyPassword:"",promotionCode:"",registerFrom:null==(U=A.state.channelInfo)?void 0:U.registerFrom,channel:null==(B=A.state.channelInfo)?void 0:B.channel,subChannel:null==(z=A.state.channelInfo)?void 0:z.subChannel,deviceNo:"",deviceType:"",operatingSystem:"",operatingVersion:"",systemType:""});j((e=>{L.value.promotionCode=e.promotionCode||"",L.value.registerFrom=e.registerFrom||L.value.registerFrom,L.value.channel=e.channel||L.value.channel,L.value.subChannel=e.subChannel||L.value.subChannel}));const R=()=>{g({url:"/pages/states/states"})},G=e=>{L.value[e]=""},H=l(!1),J=l(!1),K=l(!0),O=l(!0),Q=()=>{O.value=!O.value};let W={};o().then((e=>{W=e}));const X=l(!1),Y=()=>{if(0===S.value){if(!q.value)return void(M.value=E("login.t10"));if(!D.verifyPhone(L.value.mobile))return void(M.value=E("login.t13"))}else{if(!L.value.email)return void(M.value=E("login.t11"));if(!D.verifyEmail(L.value.email))return void(M.value=E("login.t12"))}L.value.password&&L.value.jyPassword?L.value.password===L.value.jyPassword?O.value&&(X.value=!0,L.value.deviceNo=W.deviceId,L.value.deviceType=W.deviceType,L.value.operatingSystem=W.osName,L.value.operatingVersion=W.osVersion,L.value.systemType=W.deviceModel,T({...L.value,areaCode:q.value,type:S.value,jyPassword:""}).then((e=>{if(610===e.data.code)return A.commit("setLoginInfo",{...L.value,areaCode:q.value,codeType:S.value}),void g({url:"/pages/invite/code?codeType=2"});M.value=e.data.message})).catch((e=>{M.value=E("message.t1")})).finally((()=>{X.value=!1}))):M.value=E("login.t34"):M.value=E("login.t14")};return(e,l)=>{const a=$(y("uni-nav-bar"),b),o=$(y("uni-icons"),P),u=h,g=i,V=w,j=_,I=k("van-button"),T=C,U=$(y("w-loading"),x);return s(),n(g,{class:"ano-page ano-login"},{default:t((()=>[d(a,{class:"ano-statusBar","background-color":"transparent",statusBar:!0,border:!1,height:"0"}),r("div",{class:"login-header"},[d(o,{type:"left",onClick:N})]),d(g,{class:"login-title"},{default:t((()=>[d(u,{class:"t1"},{default:t((()=>[c(v(e.$t("login.t27")),1)])),_:1})])),_:1}),d(g,{class:"login-form"},{default:t((()=>[0===S.value?(s(),n(g,{key:0,class:"form-row form-row-phone"},{default:t((()=>[d(g,{class:"input-wrap"},{default:t((()=>[d(g,{class:"phone-code",onClick:R},{default:t((()=>[d(u,{class:"num"},{default:t((()=>[c(v(p(q)?"+"+p(q):"--"),1)])),_:1}),d(o,{class:"icon-down",type:"bottom"})])),_:1}),d(g,{class:"phone-num"},{default:t((()=>[d(V,{class:"uni-input",type:"number",maxlength:"20",modelValue:L.value.mobile,"onUpdate:modelValue":l[0]||(l[0]=e=>L.value.mobile=e),placeholder:e.$t("login.t4")},null,8,["modelValue","placeholder"]),d(V,{type:"text",style:{width:"0",height:"0",opacity:"0"}}),L.value.mobile.length>0?(s(),n(o,{key:0,type:"close",onClick:l[1]||(l[1]=e=>G("mobile"))})):m("",!0)])),_:1})])),_:1})])),_:1})):m("",!0),1===S.value?(s(),n(g,{key:1,class:"form-row form-row-phone"},{default:t((()=>[d(g,{class:"input-wrap"},{default:t((()=>[d(g,{class:"phone-code",onClick:R},{default:t((()=>[d(u,{class:"num"},{default:t((()=>[c(v(p(q)?"+"+p(q):"--"),1)])),_:1}),d(j,{class:"icon-down",src:F,"lazy-load":""})])),_:1}),d(g,{class:"phone-num"},{default:t((()=>[d(V,{class:"uni-input",modelValue:L.value.email,"onUpdate:modelValue":l[2]||(l[2]=e=>L.value.email=e),maxlength:"30",placeholder:e.$t("login.t5")},null,8,["modelValue","placeholder"]),L.value.email.length>0?(s(),n(o,{key:0,type:"close",onClick:l[3]||(l[3]=e=>G("email"))})):m("",!0)])),_:1})])),_:1})])),_:1})):m("",!0),d(g,{class:"form-row form-row-password"},{default:t((()=>[d(g,{class:"input-wrap"},{default:t((()=>[H.value?(s(),n(V,{key:1,class:"uni-input",modelValue:L.value.password,"onUpdate:modelValue":l[5]||(l[5]=e=>L.value.password=e),maxlength:"42",placeholder:e.$t("login.t6")},null,8,["modelValue","placeholder"])):(s(),n(V,{key:0,password:"",class:"uni-input",maxlength:"42",modelValue:L.value.password,"onUpdate:modelValue":l[4]||(l[4]=e=>L.value.password=e),placeholder:e.$t("login.t6")},null,8,["modelValue","placeholder"])),L.value.password.length>0?(s(),n(o,{key:2,type:"close",onClick:l[6]||(l[6]=e=>G("password"))})):m("",!0),H.value?(s(),n(o,{key:3,type:"eye-slash",onClick:l[7]||(l[7]=e=>H.value=!H.value)})):(s(),n(o,{key:4,type:"eye",onClick:l[8]||(l[8]=e=>H.value=!H.value)}))])),_:1})])),_:1}),d(g,{class:"form-row form-row-password"},{default:t((()=>[d(g,{class:"input-wrap"},{default:t((()=>[J.value?(s(),n(V,{key:1,class:"uni-input",modelValue:L.value.jyPassword,"onUpdate:modelValue":l[10]||(l[10]=e=>L.value.jyPassword=e),maxlength:"42",placeholder:e.$t("login.t61")},null,8,["modelValue","placeholder"])):(s(),n(V,{key:0,password:"",class:"uni-input",maxlength:"42",modelValue:L.value.jyPassword,"onUpdate:modelValue":l[9]||(l[9]=e=>L.value.jyPassword=e),placeholder:e.$t("login.t61")},null,8,["modelValue","placeholder"])),L.value.jyPassword.length>0?(s(),n(o,{key:2,type:"close",onClick:l[11]||(l[11]=e=>G("jyPassword"))})):m("",!0),J.value?(s(),n(o,{key:3,type:"eye-slash",onClick:l[12]||(l[12]=e=>J.value=!J.value)})):(s(),n(o,{key:4,type:"eye",onClick:l[13]||(l[13]=e=>J.value=!J.value)}))])),_:1})])),_:1}),d(g,{class:"form-row form-row-recommend"},{default:t((()=>[d(g,{class:"input-label"},{default:t((()=>[d(u,{class:"t1",onClick:e.toggleRecommend},{default:t((()=>[c(v(e.$t("login.t28")),1)])),_:1},8,["onClick"]),d(j,{class:f(["icon-down",{"icon-up":K.value}]),src:F,"lazy-load":""},null,8,["class"])])),_:1}),K.value?(s(),n(g,{key:0,class:"input-wrap"},{default:t((()=>[d(V,{class:"uni-input",modelValue:L.value.promotionCode,"onUpdate:modelValue":l[14]||(l[14]=e=>L.value.promotionCode=e),maxlength:"25",placeholder:e.$t("login.t29")},null,8,["modelValue","placeholder"]),L.value.promotionCode.length>0?(s(),n(o,{key:0,type:"close",onClick:l[15]||(l[15]=e=>G("promotionCode"))})):m("",!0)])),_:1})):m("",!0)])),_:1})])),_:1}),d(g,{class:"login-errorMessage"},{default:t((()=>[M.value?(s(),n(u,{key:0,class:"t1"},{default:t((()=>[c(v(M.value),1)])),_:1})):m("",!0)])),_:1}),0===S.value?(s(),n(g,{key:0,class:"login-handle"},{default:t((()=>[d(I,{class:"login-btn",color:"#1f1f1f",disabled:!(O.value&&p(q)&&L.value.mobile&&L.value.password&&L.value.jyPassword),onClick:Y},{default:t((()=>[c(v(e.$t("login.t27")),1)])),_:1},8,["disabled"])])),_:1})):m("",!0),1===S.value?(s(),n(g,{key:1,class:"login-handle"},{default:t((()=>[d(I,{class:"login-btn",color:"#1f1f1f",disabled:!(O.value&&p(q)&&L.value.email&&L.value.password&&L.value.jyPassword),onClick:Y},{default:t((()=>[c(v(e.$t("login.t27")),1)])),_:1},8,["disabled"])])),_:1})):m("",!0),d(g,{class:"login-agreement"},{default:t((()=>[r("div",{class:f(["icon-radio2",{"icon-radio":O.value}]),onClick:Q},null,2),d(u,{class:"t1"},{default:t((()=>[c(v(e.$t("login.t30")),1)])),_:1}),d(T,{url:"/pages/login/login",class:"link","hover-class":"navigator-hover"},{default:t((()=>[d(u,{type:"default"},{default:t((()=>[c(" "+v(e.$t("login.t31"))+" ",1)])),_:1})])),_:1}),d(u,{class:"t1"},{default:t((()=>[c(v(e.$t("login.t32")),1)])),_:1}),d(T,{url:"/pages/login/login",class:"link","hover-class":"navigator-hover"},{default:t((()=>[d(u,{type:"default"},{default:t((()=>[c(" "+v(e.$t("login.t33")),1)])),_:1})])),_:1})])),_:1}),d(U,{show:X.value},null,8,["show"])])),_:1})}}},[["__scopeId","data-v-6760a05c"]]);export{U as default};
